<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ورود با تلگرام</title>
  <style>
    body{display:flex;align-items:center;justify-content:center;height:100vh;background:#f9fafb;font-family:sans-serif}
    .card{background:white;padding:30px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.1);width:340px;text-align:center}
    button{background:#0088cc;color:white;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:15px;margin-top:10px}
    pre{background:#f3f4f6;padding:10px;border-radius:8px;text-align:left;direction:ltr;overflow:auto}
  </style>
</head>
<body>
  <div class="card">
    <h2>ورود با تلگرام</h2>
    <p>برای ادامه روی دکمه زیر کلیک کنید:</p>
    <button onclick="login()">ورود</button>
    <div id="result"></div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    function login() {
      const user = tg.initDataUnsafe?.user;
      if (!user) {
        document.getElementById('result').innerHTML = '<p style="color:red">⚠️ لطفاً از داخل تلگرام باز کنید.</p>';
        return;
      }

      document.getElementById('result').innerHTML =
        `<pre>${JSON.stringify(user, null, 2)}</pre>`;

      // اگر خواستی، اطلاعات رو به n8n بفرست:
      fetch('https://YOUR-N8N-DOMAIN/webhook/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(user)
      });
    }
  </script>
</body>
</html>
